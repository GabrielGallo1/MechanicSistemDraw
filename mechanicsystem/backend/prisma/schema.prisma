generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["public", "vehicles"]
}

model client {
  id       String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name     String  @db.Char(100)
  document String  @unique @db.Char(11)
  contact  String  @unique @db.Char(9)
  address  String? @db.Char(100)
  car      car[]
  truck    truck[]
  workorders workorders[] @relation("ClientWorkorders")

  @@map("client")
  @@schema("public")
}

model mechanic {
  id         String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name       String       @db.Char(100)
  document   String       @unique @db.Char(11)
  contact    String       @unique @db.Char(9)
  satuslegal Boolean?     @default(true)
  workorders workorders[] @relation("MechanicWorkorders")

  @@map("mechanic")
  @@schema("public")
}

model car {
  id           String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  model        String  @db.Char(50)
  year         Int?
  licenseplate String  @unique @db.Char(7)
  idcliente    String? @db.Uuid
  client       client? @relation(fields: [idcliente], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@map("car")
  @@schema("vehicles")
}

model truck {
  id           String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  model        String  @db.Char(50)
  year         Int?
  licenseplate String  @unique @db.Char(7)
  idcliente    String? @db.Uuid
  client       client? @relation(fields: [idcliente], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@map("truck")
  @@schema("vehicles")
}

model workorders {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  vehicle_type String    @db.VarChar(10)
  idvehicle    String    @db.Uuid

  idmechanic   String?   @db.Uuid
  mechanic     mechanic? @relation("MechanicWorkorders", fields: [idmechanic], references: [id], onDelete: Cascade, onUpdate: Cascade)

  idclient     String?   @db.Uuid
  client       client?   @relation("ClientWorkorders", fields: [idclient], references: [id], onDelete: Cascade, onUpdate: Cascade)

  services     String?   @db.Char(255)
  timeexecute  DateTime? @default(now()) @db.Timestamp(6)
  status       String?   @db.Char(20)

  @@schema("public")
}
